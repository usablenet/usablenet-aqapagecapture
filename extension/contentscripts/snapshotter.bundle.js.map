{"version":3,"file":"plugins/extension/contentscripts/snapshotter.bundle.js","mappings":"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","sources":["webpack://aqaextensionspagecapture/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://aqaextensionspagecapture/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://aqaextensionspagecapture/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://aqaextensionspagecapture/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://aqaextensionspagecapture/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://aqaextensionspagecapture/./src/extension/contentscripts/snapshotter.ts","webpack://aqaextensionspagecapture/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","const validHeadChildren = ['title', 'base', 'link', 'meta', 'script', 'style'];\n\nconst voidElms = [\n  'area',\n  'base',\n  'br',\n  'col',\n  'command',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'keygen',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr',\n];\n\nconst extraVoidElms = ['noscript', 'iframe'];\n\nconst blockNodeNames = [\n  'address',\n  'article',\n  'aside',\n  'blockquote',\n  'details',\n  'dialog',\n  'dd',\n  'div',\n  'dl',\n  'dt',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'hr',\n  'li',\n  'main',\n  'nav',\n  'ol',\n  'p',\n  'pre',\n  'section',\n  'ul',\n];\n\nconst tableCompNames = ['table', 'thead', 'tbody', 'tfoot', 'tr', 'td', 'th', 'col', 'colgroup', 'caption'];\n\nconst notNestableElms = ['form', 'a'];\n\nconst pseudoStatesMap: Record<string, string> = {\n  active: 'a',\n  hover: 'b',\n};\nconst pseudoStates = Object.keys(pseudoStatesMap);\n\nconst clonedDocument = document.implementation.createHTMLDocument('');\n\nconst childNodes = (node: Node): Node[] => {\n  // TODO: import shadowRoot rewrite at document init\n  const shadowRoot = (node as Element).shadowRoot;\n  const children: Node[] = Array.from(node.childNodes || []);\n  // TODO: double-check behaviour with custom shadowRoots and slot elements (thanks to execution context we shouldn't do anything)\n  if (shadowRoot) {\n    children.unshift(shadowRoot);\n  }\n  return children;\n};\n\ninterface StyleSheetDump {\n  rules: string[];\n  media?: string;\n  disabled?: boolean;\n  baseURL: string | null;\n}\n\ninterface AdoptedStyleSheets {\n  sheets: CSSStyleSheet[];\n  dumps: StyleSheetDump[];\n}\n\nclass Snapshotter {\n  _nodeId: number;\n\n  _document: Document;\n\n  _docType: string;\n\n  _insideHead: boolean;\n\n  _insideParagraph: boolean;\n\n  _insideMalformedSelect: boolean;\n\n  _insideDescriptionItem: boolean;\n\n  _insideButton: boolean;\n\n  _insideMalformedIODescendant: boolean;\n\n  _insideSVG: boolean;\n\n  _selectElmsMap: Map<HTMLSelectElement, Element>;\n\n  _nestedElmsCounts: Record<string, number>;\n\n  _activeElement: Element | null;\n\n  _elmsInPseudoState: Record<string, Element[]>;\n\n  _elmsWithCORSError: Element[];\n\n  _runtimeStyleSheets: StyleSheetDump[];\n\n  _adoptedStyleSheets: AdoptedStyleSheets;\n\n  constructor(doc: Document) {\n    this._nodeId = 0;\n    this._document = doc;\n    this._docType = '';\n    this._insideHead = false;\n    this._insideParagraph = false;\n    this._insideMalformedSelect = false;\n    this._insideDescriptionItem = false;\n    this._insideButton = false;\n    this._insideMalformedIODescendant = false;\n    this._insideSVG = false;\n    this._selectElmsMap = new Map();\n    this._nestedElmsCounts = {};\n    notNestableElms.forEach((nodeName) => {\n      this._nestedElmsCounts[nodeName] = 0;\n    });\n    this._activeElement = document.activeElement;\n    while (this._activeElement?.shadowRoot) {\n      this._activeElement = this._activeElement.shadowRoot.activeElement;\n    }\n    this._elmsInPseudoState = {};\n    pseudoStates.forEach((pseudoState) => {\n      this._elmsInPseudoState[pseudoState] = [];\n    });\n    this._elmsWithCORSError = [];\n    this._runtimeStyleSheets = [];\n    this._adoptedStyleSheets = { sheets: [], dumps: [] };\n    this._importElmsInPseudoState(this._document);\n    this._document.removeChild(this._document.documentElement);\n    this._document.appendChild(this._document.importNode(document.documentElement, false));\n    this._processAdoptedStyleSheets(document, this._document.documentElement);\n    childNodes(document.documentElement).forEach((node) => {\n      this._importNode(node, this._document.documentElement);\n    });\n    // Setting/removing selected attribute from options\n    this._selectElmsMap.forEach((clonedElm, elm) => {\n      const realOpts = elm.querySelectorAll('option');\n      const clonedOpts = elm.querySelectorAll('option, un-es-replace[un-nodename=\"option\"]');\n      const optsCount = realOpts.length;\n      for (let i = 0; i < optsCount; i += 1) {\n        const realOpt = realOpts[i];\n        const clonedOpt = clonedOpts[i];\n        if (realOpt.selected) {\n          clonedOpt.setAttribute('selected', 'selected');\n        } else {\n          clonedOpt.removeAttribute('selected');\n        }\n      }\n    });\n    // Converting wrong html children in un-es-replace comments\n    const htmlChildren = childNodes(this._document.documentElement);\n    htmlChildren.forEach((child) => {\n      const nodeName = (child.nodeName || '').toLowerCase();\n      if (nodeName && !nodeName.startsWith('#') && child !== this._document.head && child !== this._document.body) {\n        const comment = this._document.createComment(\n          `un-es-replace:${encodeURIComponent((child as Element).outerHTML)}`,\n        );\n        child.parentNode?.replaceChild(comment, child);\n      }\n    });\n    // Converting <un-es-replace> nodes in scripts if they are a descendant of head (see #AUT-2726)\n    const headChildrenToReplace = this._document.querySelectorAll('head > un-es-replace');\n    for (let i = headChildrenToReplace.length - 1; i >= 0; i -= 1) {\n      const child = headChildrenToReplace[i];\n      const scriptElm = this._document.createElement('script');\n      scriptElm.setAttribute('type', 'text/un-es-replace');\n      scriptElm.innerHTML = encodeURIComponent(child.outerHTML);\n      this._document.head.replaceChild(scriptElm, child);\n    }\n    // Converting text nodes in scripts if they are a descendant of head\n    const headChildren = this._document.head ? childNodes(this._document.head) : [];\n    for (let i = headChildren.length - 1; i >= 0; i -= 1) {\n      const nodeName = headChildren[i].nodeName || '';\n      if (nodeName === '#text' && (headChildren[i].nodeValue || '').trim() !== '') {\n        const scriptElm = this._document.createElement('script');\n        scriptElm.setAttribute('type', 'text/un-es-replace');\n        scriptElm.innerHTML = encodeURIComponent(headChildren[i].nodeValue ?? '');\n        this._document.head.replaceChild(scriptElm, headChildren[i]);\n      }\n    }\n    // Importing runtime and adopted styleSheets (if needed)\n    if (this._runtimeStyleSheets.length || this._adoptedStyleSheets.sheets.length) {\n      const runtimeSheetsScript = this._document.createElement('script');\n      runtimeSheetsScript.setAttribute('id', 'FATRuntimeSheets');\n      runtimeSheetsScript.setAttribute('class', 'FATScript');\n      runtimeSheetsScript.setAttribute('type', 'text/runtime-sheets');\n      runtimeSheetsScript.innerHTML = JSON.stringify({\n        nodes: this._runtimeStyleSheets,\n        adp: this._adoptedStyleSheets.dumps,\n      });\n      this._document.body.appendChild(runtimeSheetsScript);\n    }\n    const { doctype } = document;\n    if (doctype?.name) {\n      this._docType = `<!DOCTYPE ${doctype.name}${doctype.publicId ? ` PUBLIC \"${doctype.publicId}\"` : ''}${\n        !doctype.publicId && doctype.systemId ? ' SYSTEM' : ''\n      }${doctype.systemId ? ` \"${doctype.systemId}\"` : ''}>`;\n    }\n  }\n\n  get html(): string {\n    return this._docType + this._document.documentElement.outerHTML;\n  }\n\n  static run(): string {\n    clonedDocument.open();\n    clonedDocument.close();\n    const snapshot = new Snapshotter(clonedDocument);\n    return snapshot.html;\n  }\n\n  _importElmsInPseudoState(context: Document | ShadowRoot): void {\n    pseudoStates.forEach((pseudoState) => {\n      const targetElms = Array.from(context.querySelectorAll(`*:${pseudoState}`) || []);\n      if (targetElms.length) {\n        this._elmsInPseudoState[pseudoState] = this._elmsInPseudoState[pseudoState].concat(targetElms);\n      }\n    });\n  }\n\n  _importNode(node: Node, clonedParent: Node): void {\n    if (!node) {\n      return;\n    }\n    let nodeName = (node.nodeName || '').toLocaleLowerCase();\n    if (!nodeName) {\n      return;\n    }\n\n    const canBeProcessorOf = {\n      head: !this._insideHead,\n      paragraph: !this._insideParagraph,\n      malformedSelect: !this._insideMalformedSelect,\n      descriptionItem: !this._insideDescriptionItem,\n      button: !this._insideButton,\n      malformedIODescendant: !this._insideMalformedIODescendant,\n      svg: !this._insideSVG,\n    };\n\n    let orNodeName = nodeName;\n    let nodeNameAttr = null;\n    let isNestedElm = false;\n    let clonedElm: Node | null = null;\n    if (node instanceof ShadowRoot) {\n      clonedElm = this._document.createElement('un-shadow-elm');\n      this._importElmsInPseudoState(node);\n      this._processAdoptedStyleSheets(node, clonedElm as Element);\n    } else if (node.nodeType === Node.TEXT_NODE) {\n      clonedElm = this._document.createTextNode(node.nodeValue ?? '');\n    } else if (node.nodeType === Node.CDATA_SECTION_NODE) {\n      const xmlDoc = new DOMParser().parseFromString('<xml></xml>', 'application/xml');\n      clonedElm = xmlDoc.createCDATASection(node.nodeValue ?? '');\n    } else if (node.nodeType === Node.PROCESSING_INSTRUCTION_NODE) {\n      const processingInstruction = node as ProcessingInstruction;\n      clonedElm = this._document.createProcessingInstruction(processingInstruction.target, processingInstruction.data);\n    } else if (node.nodeType === Node.COMMENT_NODE) {\n      let parentNodeName = (clonedParent.nodeName || '').toLowerCase();\n      if (parentNodeName === 'un-es-replace') {\n        parentNodeName = (clonedParent as Element).getAttribute('un-nodename') ?? '';\n      }\n      if (parentNodeName === 'style') {\n        return;\n      }\n      clonedElm = this._document.createComment(node.nodeValue ?? '');\n    } else {\n      let parentNodeName = (clonedParent.nodeName || '').toLowerCase();\n      if (parentNodeName === 'un-es-replace') {\n        parentNodeName = (clonedParent as Element).getAttribute('un-nodename') ?? '';\n      }\n      isNestedElm = typeof this._nestedElmsCounts[nodeName] !== 'undefined';\n      if (isNestedElm) {\n        this._nestedElmsCounts[nodeName] += 1;\n        if (this._nestedElmsCounts[nodeName] > 1) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        }\n      }\n      if (nodeName !== 'un-es-replace') {\n        const elmQuerySelectorAll = (selectors: string): Element[] => {\n          let descendants: Element[] = [];\n          try {\n            descendants = Array.from((node as Element).querySelectorAll(selectors));\n          } catch (e) {\n            descendants = [];\n          }\n          return descendants;\n        };\n        const inlineOnlyMode = this._insideParagraph || this._insideButton;\n        if (\n          (nodeName === 'html' && node !== document.documentElement) ||\n          (nodeName === 'head' && (node !== document.head || node.compareDocumentPosition(document.body) !== 4)) ||\n          (nodeName === 'body' && node !== document.body)\n        ) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (nodeName === 'script' || nodeName === 'style') {\n          if (node.childNodes.length > 1 || elmQuerySelectorAll('*').length > 0) {\n            nodeNameAttr = nodeName;\n            nodeName = 'un-es-replace';\n          } else if (!(node.textContent || '').includes(`</${nodeName}>`)) {\n            const tmpDiv = this._document.createElement('div');\n            tmpDiv.innerHTML = node.textContent ?? '';\n            if (tmpDiv.childNodes.length > 1 || tmpDiv.querySelectorAll('*').length) {\n              nodeNameAttr = nodeName;\n              nodeName = 'un-es-replace';\n            }\n          } else {\n            nodeNameAttr = nodeName;\n            nodeName = 'un-es-replace';\n          }\n        } else if (nodeName === 'image') {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (this._insideHead && !validHeadChildren.includes(nodeName)) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (\n          (extraVoidElms.includes(nodeName) || voidElms.includes(nodeName)) &&\n          elmQuerySelectorAll('*').length > 0\n        ) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (\n          this._insideMalformedSelect ||\n          (nodeName === 'select' && elmQuerySelectorAll('*:not(option):not(optgroup)').length > 0)\n        ) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n          this._insideMalformedSelect = true; // Updating status variable\n        } else if (\n          this._insideMalformedIODescendant ||\n          (inlineOnlyMode && (blockNodeNames.includes(nodeName) || tableCompNames.includes(nodeName)))\n        ) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n          this._insideMalformedIODescendant = true; // Updating status variable\n        } else if (tableCompNames.includes(nodeName)) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (nodeName === 'li' && parentNodeName !== 'ul' && parentNodeName !== 'ol') {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (this._insideDescriptionItem && (nodeName === 'dd' || nodeName === 'dt')) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (this._insideButton && nodeName === 'button') {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (node instanceof HTMLTemplateElement) {\n          // TODO: double-check if it's possible to use template nodeName\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        } else if (this._insideSVG && !(node instanceof SVGElement)) {\n          nodeNameAttr = nodeName;\n          nodeName = 'un-es-replace';\n        }\n      }\n\n      // Updating status variables\n      if (node === document.head) {\n        this._insideHead = true;\n      } else if (nodeName === 'p') {\n        this._insideParagraph = true;\n      } else if (nodeName === 'dd' || nodeName === 'dt') {\n        this._insideDescriptionItem = true;\n      } else if (nodeName === 'dl') {\n        this._insideDescriptionItem = false;\n      } else if (nodeName === 'button') {\n        this._insideButton = true;\n      } else if (nodeName === 'svg') {\n        this._insideSVG = true;\n      }\n\n      // Creating clone\n      try {\n        clonedElm = this._document.createElement(nodeName);\n        if (nodeNameAttr) {\n          orNodeName = nodeNameAttr;\n        }\n      } catch (e) {\n        try {\n          // Workaround for invalid nodeName\n          const tmpElm = this._document.createElement('div');\n          tmpElm.innerHTML = `<${nodeName}></${nodeName}>`;\n          if (tmpElm.firstChild) {\n            clonedElm = tmpElm.firstChild as Element;\n          }\n        } catch (e2) {\n          // eslint-disable-line no-shadow\n          clonedElm = null;\n        }\n      }\n\n      if (clonedElm !== null && clonedElm instanceof Element) {\n        if (nodeNameAttr) {\n          clonedElm.setAttribute('un-nodename', orNodeName);\n        }\n\n        // Setting un-is-head attribute in case of misplaced head\n        if (node === document.head && nodeName === 'un-es-replace') {\n          clonedElm.setAttribute('un-is-head', 'true');\n        }\n\n        // Importing attributes\n        const attributes = Array.from((node as Element).attributes);\n        const attributesCount = attributes.length;\n        for (let i = 0; i < attributesCount; i += 1) {\n          const attribute = attributes[i];\n          /**\n           * Try-Catch is needed because sometimes attribute.name\n           * could be NOT valid and to generate a DOM exception\n           */\n          try {\n            clonedElm.setAttribute(attribute.name, attribute.value);\n          } catch (e) {\n            // continue\n          }\n        }\n\n        if ((node instanceof HTMLMediaElement || node instanceof HTMLImageElement) && node.currentSrc) {\n          clonedElm.setAttribute('un-curr-src', node.currentSrc);\n        } else if (node instanceof HTMLIFrameElement && !node.getAttribute('un-framename')) {\n          clonedElm.setAttribute('un-framename', '');\n        } else if (node instanceof HTMLDialogElement && node.getAttribute('un-show-modal')) {\n          clonedElm.removeAttribute('open');\n        } else if (node instanceof HTMLInputElement) {\n          if (node.type === 'radio' || node.type === 'checkbox') {\n            if (node.checked) {\n              clonedElm.setAttribute('checked', 'checked');\n            } else {\n              clonedElm.removeAttribute('checked');\n            }\n          } else {\n            clonedElm.setAttribute('value', node.value);\n          }\n        } else if (node instanceof HTMLTextAreaElement) {\n          clonedElm.innerHTML = node.value;\n        } else if (node instanceof HTMLSelectElement) {\n          this._selectElmsMap.set(node, clonedElm);\n        } else if (node instanceof HTMLCanvasElement) {\n          try {\n            const dataUrl = node.toDataURL();\n            clonedElm.setAttribute('un-data-url', dataUrl);\n          } catch (e) {\n            // do nothing, not possible to import per security exception\n          }\n        }\n\n        if (node === this._activeElement) {\n          clonedElm.setAttribute('un-active-elm', 'true');\n        }\n\n        const elmPseudoStates: string[] = [];\n        pseudoStates.forEach((pseudoState) => {\n          if (this._elmsInPseudoState[pseudoState].includes(node as Element)) {\n            elmPseudoStates.push(pseudoStatesMap[pseudoState]);\n          }\n        });\n        if (elmPseudoStates.length) {\n          clonedElm.setAttribute('un-pseudos', elmPseudoStates.join(''));\n        }\n\n        if (this._elmsWithCORSError.includes(node as Element)) {\n          clonedElm.setAttribute('un-cors-error', 'true');\n        }\n\n        const animations = node instanceof Element ? node.getAnimations() : [];\n        if (animations.length) {\n          const animatedCSSProps: string[] = [];\n          animations.forEach((animation) => {\n            if (animation instanceof CSSAnimation) {\n              return;\n            }\n            let keyframes: ComputedKeyframe[] = [];\n            try {\n              keyframes = (animation.effect as KeyframeEffect).getKeyframes();\n            } catch (error) {\n              keyframes = [];\n            }\n            keyframes.forEach((keyframe) => {\n              const animationCSSProps: Record<string, unknown> = { ...keyframe };\n              delete animationCSSProps.offset;\n              delete animationCSSProps.computedOffset;\n              delete animationCSSProps.easing;\n              delete animationCSSProps.composite;\n              if (typeof animationCSSProps.cssFloat !== 'undefined') {\n                animationCSSProps.float = animationCSSProps.cssFloat;\n                delete animationCSSProps.cssFloat;\n              }\n              if (typeof animationCSSProps.cssOffset !== 'undefined') {\n                animationCSSProps.offset = animationCSSProps.cssOffset;\n                delete animationCSSProps.cssOffset;\n              }\n              Object.keys(animationCSSProps).forEach((prop) => {\n                if (animatedCSSProps.includes(prop)) {\n                  return;\n                }\n                animatedCSSProps.push(prop);\n              });\n            });\n          });\n          if (animatedCSSProps.length) {\n            const computedStyle = window.getComputedStyle(node as Element);\n            const jsAnimation: Record<string, unknown> = {};\n            animatedCSSProps.forEach((prop) => {\n              const key = prop as keyof typeof computedStyle;\n              if (typeof computedStyle[key] !== 'undefined') {\n                jsAnimation[prop] = computedStyle[key];\n              }\n            });\n            clonedElm.setAttribute('un-js-animation', JSON.stringify(jsAnimation));\n          }\n        }\n      }\n    }\n\n    if (!clonedElm) {\n      return;\n    }\n\n    clonedParent.appendChild(clonedElm);\n\n    let childrenImported = false;\n    if ((orNodeName === 'link' || orNodeName === 'style') && clonedElm instanceof Element) {\n      // Managing runtime and disabled styles\n      const styleElm = node as HTMLLinkElement | HTMLStyleElement;\n      const isDisabled = styleElm.disabled;\n      const isSheetDisabled = !!styleElm.sheet?.disabled;\n      const hasRuntimeRules = styleElm.getAttribute('un-runtimestyles') === 'true';\n      if (!isDisabled && !isSheetDisabled) {\n        if (hasRuntimeRules) {\n          const dump = this._dumpCSSRules(styleElm.sheet);\n          if (orNodeName === 'style') {\n            clonedElm.innerHTML = dump.rules.join('\\n');\n            childrenImported = true;\n          } else {\n            clonedElm.setAttribute('un-runtimeindex', `${this._runtimeStyleSheets.length}`);\n            this._runtimeStyleSheets.push(dump);\n          }\n        }\n      } else if (isDisabled || isSheetDisabled) {\n        clonedElm.setAttribute('un-disabled', `${isDisabled ? 1 : 0},${isSheetDisabled ? 1 : 0}`);\n        clonedElm.removeAttribute('disabled');\n      }\n      clonedElm.removeAttribute('un-runtimestyles');\n    }\n    if (!childrenImported) {\n      const children = childNodes(node);\n      const childrenCount = children.length;\n      for (let i = 0; i < childrenCount; i += 1) {\n        const child = children[i];\n        this._importNode(child, clonedElm);\n      }\n    }\n\n    // Updating status variables\n    if (canBeProcessorOf.head && this._insideHead) {\n      this._insideHead = false;\n    } else if (isNestedElm) {\n      this._nestedElmsCounts[orNodeName] -= 1;\n    } else if (canBeProcessorOf.malformedSelect && this._insideMalformedSelect) {\n      this._insideMalformedSelect = false;\n    } else if (canBeProcessorOf.malformedIODescendant && this._insideMalformedIODescendant) {\n      this._insideMalformedIODescendant = false;\n    } else if (canBeProcessorOf.paragraph && this._insideParagraph) {\n      this._insideParagraph = false;\n    } else if (canBeProcessorOf.descriptionItem && this._insideDescriptionItem) {\n      this._insideDescriptionItem = false;\n    } else if (canBeProcessorOf.button && this._insideButton) {\n      this._insideButton = false;\n    } else if (canBeProcessorOf.svg && this._insideSVG) {\n      this._insideSVG = false;\n    }\n  }\n\n  _dumpCSSRules(styleSheet: CSSStyleSheet | null): StyleSheetDump {\n    const dump: StyleSheetDump = {\n      rules: [],\n      baseURL: null,\n    };\n    if (!styleSheet) {\n      return dump;\n    }\n    const { ownerNode } = styleSheet;\n    let rules: CSSRule[] = [];\n    try {\n      rules = Array.from(styleSheet.cssRules || []);\n    } catch (error) {\n      if (error instanceof Error && error.name === 'SecurityError') {\n        if (ownerNode instanceof Element) {\n          this._elmsWithCORSError.push(ownerNode);\n        }\n        rules = [];\n      } else {\n        throw error;\n      }\n    }\n    if (!ownerNode) {\n      dump.disabled = styleSheet.disabled;\n      if (dump.media?.length) {\n        dump.media = styleSheet.media.mediaText;\n      }\n    } else if (ownerNode instanceof HTMLLinkElement) {\n      dump.baseURL = ownerNode.href;\n    }\n    rules.forEach((rule) => {\n      const { cssText } = rule;\n      if (cssText) {\n        dump.rules.push(cssText);\n      }\n    });\n    return dump;\n  }\n\n  _processAdoptedStyleSheets(context: Document | ShadowRoot, clonedElm: Element): void {\n    const styleSheets = Array.from(context.adoptedStyleSheets);\n    const indexes: number[] = [];\n    styleSheets.forEach((styleSheet) => {\n      if (!this._adoptedStyleSheets.sheets.includes(styleSheet)) {\n        const dump = this._dumpCSSRules(styleSheet);\n        indexes.push(this._adoptedStyleSheets.sheets.length);\n        this._adoptedStyleSheets.sheets.push(styleSheet);\n        this._adoptedStyleSheets.dumps.push(dump);\n      } else {\n        indexes.push(this._adoptedStyleSheets.sheets.indexOf(styleSheet));\n      }\n    });\n    if (indexes.length) {\n      clonedElm.setAttribute('un-adp', indexes.join(','));\n    }\n  }\n}\n\nwindow._AQAExt_ = { Snapshotter };\n\nexport {};\n","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","e","toPrimitive","call","r","TypeError","String","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","key","_defineProperty","value","validHeadChildren","voidElms","extraVoidElms","blockNodeNames","tableCompNames","notNestableElms","pseudoStatesMap","active","hover","pseudoStates","keys","clonedDocument","document","implementation","createHTMLDocument","childNodes","node","shadowRoot","children","Array","from","unshift","Snapshotter","doc","_this","a","n","_classCallCheck","this","_nodeId","_document","_docType","_insideHead","_insideParagraph","_insideMalformedSelect","_insideDescriptionItem","_insideButton","_insideMalformedIODescendant","_insideSVG","_selectElmsMap","Map","_nestedElmsCounts","forEach","nodeName","_activeElement","activeElement","_this$_activeElement","_elmsInPseudoState","pseudoState","_elmsWithCORSError","_runtimeStyleSheets","_adoptedStyleSheets","sheets","dumps","_importElmsInPseudoState","removeChild","documentElement","appendChild","importNode","_processAdoptedStyleSheets","_importNode","clonedElm","elm","realOpts","querySelectorAll","clonedOpts","optsCount","realOpt","clonedOpt","selected","setAttribute","removeAttribute","child","toLowerCase","startsWith","head","body","_child$parentNode","comment","createComment","concat","encodeURIComponent","outerHTML","parentNode","replaceChild","headChildrenToReplace","scriptElm","createElement","innerHTML","headChildren","nodeValue","trim","_headChildren$_i$node","runtimeSheetsScript","JSON","stringify","nodes","adp","doctype","name","publicId","systemId","get","context","_this2","targetElms","clonedParent","_this3","toLocaleLowerCase","canBeProcessorOf","orNodeName","nodeNameAttr","isNestedElm","ShadowRoot","nodeType","Node","TEXT_NODE","_node$nodeValue","createTextNode","CDATA_SECTION_NODE","_node$nodeValue2","DOMParser","parseFromString","createCDATASection","PROCESSING_INSTRUCTION_NODE","processingInstruction","createProcessingInstruction","target","data","COMMENT_NODE","_node$nodeValue3","_getAttribute","parentNodeName","getAttribute","_getAttribute2","elmQuerySelectorAll","selectors","descendants","inlineOnlyMode","compareDocumentPosition","textContent","includes","_node$textContent","tmpDiv","HTMLTemplateElement","SVGElement","tmpElm","firstChild","e2","Element","attributes","attributesCount","attribute","HTMLMediaElement","HTMLImageElement","currentSrc","HTMLIFrameElement","HTMLDialogElement","HTMLInputElement","type","checked","HTMLTextAreaElement","HTMLSelectElement","set","HTMLCanvasElement","dataUrl","toDataURL","elmPseudoStates","push","join","animations","getAnimations","animatedCSSProps","animation","CSSAnimation","keyframes","effect","getKeyframes","error","keyframe","animationCSSProps","_objectSpread","offset","computedOffset","easing","composite","cssFloat","cssOffset","prop","computedStyle","window","getComputedStyle","jsAnimation","childrenImported","_styleElm$sheet","styleElm","isDisabled","disabled","isSheetDisabled","sheet","hasRuntimeRules","dump","_dumpCSSRules","rules","childrenCount","styleSheet","baseURL","_dump$media","ownerNode","cssRules","Error","HTMLLinkElement","href","media","mediaText","rule","cssText","_this4","styleSheets","adoptedStyleSheets","indexes","indexOf","open","close","html","_AQAExt_"],"sourceRoot":""}
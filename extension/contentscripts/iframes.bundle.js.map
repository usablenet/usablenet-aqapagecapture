{"version":3,"file":"plugins/extension/contentscripts/iframes.bundle.js","mappings":"mBAEO,IAAWA,EAAqB,SAArBA,GAAqB,OAArBA,EAAqB,sBAArBA,EAAqB,0BAArBA,EAAqB,0CAArBA,EAAqB,sBAArBA,EAAqB,wBAArBA,EAAqB,gDAArBA,EAAqB,8BAArBA,CAAqB,OCAvC,YACE,WACE,IACE,OAAOC,OAAOC,SAAWD,MAC3B,CAAE,MAAOE,GACP,OAAO,CACT,CACF,EAGMC,IACFC,OAAOC,QACJC,YAAY,CACXC,OAAQR,EAAsBS,UAC9BC,IAAKT,OAAOU,SAASC,OAEtBC,MAAK,SAACC,GACDb,OAAOc,aACTd,OAAOc,aAAaC,aAAa,eAAgBF,GAEjDb,OAAOgB,SAASC,gBAAgBF,aAAa,wBAAyBF,EAE1E,IAON,IADA,IAAMK,EAASF,SAASG,qBAAqB,UACpCC,EAAI,EAAGA,EAAIF,EAAOG,OAAQD,GAAK,EACtCF,EAAOE,GAAGL,aACR,oBACC,IAAIO,MAAOC,UAAYH,GAAGI,SAAS,IAAMC,KAAKC,SAASF,SAAS,IAAIG,OAAO,GAGlF,CAEAC,E","sources":["webpack://aqaextensionspagecapture/./src/models/ChromeMessaging.ts","webpack://aqaextensionspagecapture/./src/extension/contentscripts/iframes.ts"],"sourcesContent":["import type { CustomDevice, PresetDevice } from './Devices';\n\nexport const enum ChromeMessagingAction {\n  ADD_FRAME = 'new-frame',\n  DO_SNAPSHOT = 'do-snapshot',\n  GET_SIDEPANEL_WIDTH = 'get-sidepanel-width',\n  LOADER_ON = 'loader-on',\n  LOADER_OFF = 'loader-off',\n  RELOAD_FLOW_COLLECTION = 'reload_flow_collection',\n  RESIZE_WINDOW = 'resize-window',\n}\n\nexport interface ChromeMsgResizeWindow {\n  action: ChromeMessagingAction.RESIZE_WINDOW;\n  device: CustomDevice | PresetDevice;\n  reload?: boolean;\n}\n\nexport type ChromeMessagePayload = ChromeMsgResizeWindow;\n","import { ChromeMessagingAction } from 'models/ChromeMessaging';\n\nfunction iFrames(): void {\n  function isIframe(): boolean {\n    try {\n      return window.parent !== window; // && window.parent.window.parent.window === window.parent;\n    } catch (e) {\n      return true;\n    }\n  }\n\n  function addFrame(): void {\n    if (isIframe()) {\n      chrome.runtime\n        .sendMessage({\n          action: ChromeMessagingAction.ADD_FRAME,\n          url: window.location.href,\n        })\n        .then((response: string) => {\n          if (window.frameElement) {\n            window.frameElement.setAttribute('un-framename', response);\n          } else {\n            window.document.documentElement.setAttribute('data-un-htmlframename', response);\n          }\n        });\n    }\n  }\n\n  addFrame();\n\n  const frames = document.getElementsByTagName('iframe');\n  for (let i = 0; i < frames.length; i += 1) {\n    frames[i].setAttribute(\n      'data-un-frameid',\n      (new Date().getTime() + i).toString(16) + Math.random().toString(36).substr(2),\n    );\n  }\n}\n\niFrames();\n"],"names":["ChromeMessagingAction","window","parent","e","isIframe","chrome","runtime","sendMessage","action","ADD_FRAME","url","location","href","then","response","frameElement","setAttribute","document","documentElement","frames","getElementsByTagName","i","length","Date","getTime","toString","Math","random","substr","iFrames"],"sourceRoot":""}
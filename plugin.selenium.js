/*! For license information please see plugin.selenium.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AQAPageCapturePlugin=t():e.AQAPageCapturePlugin=t()}(this,(()=>(()=>{var e={172:e=>{e.exports=function(e,t){this.v=e,this.k=t},e.exports.__esModule=!0,e.exports.default=e.exports},993:(e,t,r)=>{var n=r(546);function o(){var t,r,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",i=s.toStringTag||"@@toStringTag";function u(e,o,s,a){var i=o&&o.prototype instanceof l?o:l,u=Object.create(i.prototype);return n(u,"_invoke",function(e,n,o){var s,a,i,u=0,l=o||[],p=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,r){return s=e,a=0,i=t,f.n=r,c}};function h(e,n){for(a=e,i=n,r=0;!p&&u&&!o&&r<l.length;r++){var o,s=l[r],h=f.p,d=s[2];e>3?(o=d===n)&&(i=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=t):s[0]<=h&&((o=e<2&&h<s[1])?(a=0,f.v=n,f.n=s[1]):h<d&&(o=e<3||s[0]>n||n>d)&&(s[4]=e,s[5]=n,f.n=d,a=0))}if(o||e>1)return c;throw p=!0,n}return function(o,l,d){if(u>1)throw TypeError("Generator is already running");for(p&&1===l&&h(l,d),a=l,i=d;(r=a<2?t:i)||!p;){s||(a?a<3?(a>1&&(f.n=-1),h(a,i)):f.n=i:f.v=i);try{if(u=2,s){if(a||(o="next"),r=s[o]){if(!(r=r.call(s,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=s.return)&&r.call(s),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);s=t}else if((r=(p=f.n<0)?i:e.call(n,f))!==c)break}catch(e){s=t,a=1,i=e}finally{u=1}}return{value:r,done:p}}}(e,s,a),!0),u}var c={};function l(){}function p(){}function f(){}r=Object.getPrototypeOf;var h=[][a]?r(r([][a]())):(n(r={},a,(function(){return this})),r),d=f.prototype=l.prototype=Object.create(h);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return p.prototype=f,n(d,"constructor",f),n(f,"constructor",p),p.displayName="GeneratorFunction",n(f,i,"GeneratorFunction"),n(d),n(d,i,"Generator"),n(d,a,(function(){return this})),n(d,"toString",(function(){return"[object Generator]"})),(e.exports=o=function(){return{w:u,m}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},869:(e,t,r)=>{var n=r(887);e.exports=function(e,t,r,o,s){var a=n(e,t,r,o,s);return a.next().then((function(e){return e.done?e.value:a.next()}))},e.exports.__esModule=!0,e.exports.default=e.exports},887:(e,t,r)=>{var n=r(993),o=r(791);e.exports=function(e,t,r,s,a){return new o(n().w(e,t,r,s),a||Promise)},e.exports.__esModule=!0,e.exports.default=e.exports},791:(e,t,r)=>{var n=r(172),o=r(546);e.exports=function e(t,r){function s(e,o,a,i){try{var u=t[e](o),c=u.value;return c instanceof n?r.resolve(c.v).then((function(e){s("next",e,a,i)}),(function(e){s("throw",e,a,i)})):r.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return s("throw",e,a,i)}))}catch(e){i(e)}}var a;this.next||(o(e.prototype),o(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",(function(){return this}))),o(this,"_invoke",(function(e,t,n){function o(){return new r((function(t,r){s(e,n,t,r)}))}return a=a?a.then(o,o):o()}),!0)},e.exports.__esModule=!0,e.exports.default=e.exports},546:e=>{function t(r,n,o,s){var a=Object.defineProperty;try{a({},"",{})}catch(r){a=0}e.exports=t=function(e,r,n,o){function s(r,n){t(e,r,(function(e){return this._invoke(r,n,e)}))}r?a?a(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n:(s("next",0),s("throw",1),s("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n,o,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},373:e=>{e.exports=function(e){var t=Object(e),r=[];for(var n in t)r.unshift(n);return function e(){for(;r.length;)if((n=r.pop())in t)return e.value=n,e.done=!1,e;return e.done=!0,e}},e.exports.__esModule=!0,e.exports.default=e.exports},633:(e,t,r)=>{var n=r(172),o=r(993),s=r(869),a=r(887),i=r(791),u=r(373),c=r(579);function l(){"use strict";var t=o(),r=t.m(l),p=(Object.getPrototypeOf?Object.getPrototypeOf(r):r.__proto__).constructor;function f(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))}var h={throw:1,return:2,break:3,continue:3};function d(e){var t,r;return function(n){t||(t={stop:function(){return r(n.a,2)},catch:function(){return n.v},abrupt:function(e,t){return r(n.a,h[e],t)},delegateYield:function(e,o,s){return t.resultName=o,r(n.d,c(e),s)},finish:function(e){return r(n.f,e)}},r=function(e,r,o){n.p=t.prev,n.n=t.next;try{return e(r,o)}finally{t.next=n.n}}),t.resultName&&(t[t.resultName]=n.v,t.resultName=void 0),t.sent=n.v,t.next=n.n;try{return e.call(this,t)}finally{n.p=t.prev,n.n=t.next}}}return(e.exports=l=function(){return{wrap:function(e,r,n,o){return t.w(d(e),r,n,o&&o.reverse())},isGeneratorFunction:f,mark:t.m,awrap:function(e,t){return new n(e,t)},AsyncIterator:i,async:function(e,t,r,n,o){return(f(t)?a:s)(d(e),t,r,n,o)},keys:u,values:c}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports},579:(e,t,r)=>{var n=r(738).default;e.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(n(e)+" is not iterable")},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},756:(e,t,r)=>{var n=r(633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";function e(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(o,s){var a=t.apply(r,n);function i(t){e(a,o,s,i,u,"next",t)}function u(t){e(a,o,s,i,u,"throw",t)}i(void 0)}))}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function u(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function p(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(n,{default:()=>E});var f=r(756),h=r.n(f),d=function(e){return e.CREATE_FLOW="bg-ext-create-flow",e.DO_SNAPSHOT="bg-ext-do-snapshot",e.DOWNLOAD="bg-ext-download-flow",e.HEALTH_CHECK="bg-ext-health-check",e.NETWORK_ADD_RESOURCE="bg-ext-add-network-resource",e.UPLOAD="bg-ext-upload",e}({}),m=function(e){return e.DESKTOP_1="device_0",e.DESKTOP_2="device_1",e.DESKTOP_3="device_2",e.MOBILE_1="device_3",e.CUSTOM="custom",e}({}),v=function(e){return e.NETWORK_GET_RESPONSE_BODY="Network.getResponseBody",e.NETWORK_ENABLE="Network.enable",e.NETWORK_WILL_SENT="Network.requestWillBeSent",e.NETWORK_LOADING_FINISHED="Network.loadingFinished",e.NETWORK_RESPONSE_RECEIVED="Network.responseReceived",e.RUNTIME_WAIT_DEBUGGER="Runtime.runIfWaitingForDebugger",e.TARGET_ATTACH="Target.attachToTarget",e.TARGET_AUTOATTACH="Target.setAutoAttach",e.TARGET_ATTACHED="Target.attachedToTarget",e.TARGET_CREATED="Target.targetCreated",e.TARGET_DISCOVER_TARGETS="Target.setDiscoverTargets",e}({}),y=function(){function e(t,r,n,s){o(this,e),p(this,"wsConnection",void 0),p(this,"executeRequests",new Map),p(this,"driver",void 0),p(this,"sessionId",void 0),p(this,"extensionId",void 0),p(this,"resourcesToIntercept",["font","image","stylesheet"]),p(this,"requestID",0),p(this,"networkRequests",[]),p(this,"requestsHash",{}),this.driver=t,this.sessionId=n,this.wsConnection=r,this.extensionId=s,this.wsConnection.on("message",this.onMessage.bind(this)),this.wsConnection.on("close",this.onClose.bind(this)),this.wsConnection.on("error",this.rejectAll.bind(this))}return u(e,[{key:"getRequest",value:function(e){return this.getRequests(e)[0]}},{key:"getRequests",value:function(e){if(null==e)return this.networkRequests;if(e instanceof RegExp){var t=e;return this.networkRequests.filter((function(e){return t.test(e.request.url)}))}return this.networkRequests.filter((function(t){return e(t.request)}))}},{key:"getResponseBody",value:(s=t(h().mark((function e(t,r){var n,o,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute(v.NETWORK_GET_RESPONSE_BODY,{requestId:t.requestId},r);case 2:return n=e.sent,o=n.base64Encoded,s=n.body,e.abrupt("return",{base64Encoded:o,body:s});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"execute",value:function(e,t,r){this.requestID+=1;var n={sessionId:null!=r?r:this.sessionId,method:e,params:t,id:this.requestID},o={id:n.id,resolve:function(){},reject:function(){}},s=new Promise((function(e,t){o.resolve=e,o.reject=t}));return this.executeRequests.set(o.id,o),this.wsConnection.send(JSON.stringify(n)),s}},{key:"onMessage",value:(n=t(h().mark((function t(r){var n,o,s,a,i,u,c,l,p,f,m,y;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!("id"in(n=JSON.parse(r.toString())))){t.next=7;break}if(o=n.id,s=n.result,!this.executeRequests.has(o)){t.next=7;break}return null===(a=this.executeRequests.get(o))||void 0===a||a.resolve(s),this.executeRequests.delete(o),t.abrupt("return");case 7:if(!("method"in n)){t.next=44;break}if(n.method!==v.NETWORK_WILL_SENT){t.next=11;break}return this.resourcesToIntercept.includes(n.params.type.toLowerCase())&&(i={requestId:n.params.requestId,request:{url:n.params.request.url,method:n.params.request.method,headers:n.params.request.headers,date:Date.now()},type:n.params.type,response:{}},this.networkRequests.push(i),this.requestsHash[i.requestId]=i),t.abrupt("return");case 11:if(n.method!==v.NETWORK_RESPONSE_RECEIVED){t.next=17;break}if(null!=(u=this.requestsHash[n.params.requestId])){t.next=15;break}return t.abrupt("return");case 15:return u.response={status:n.params.response.status,headers:n.params.response.headers,date:Date.now()},t.abrupt("return");case 17:if(n.method!==v.NETWORK_LOADING_FINISHED){t.next=30;break}if(!(c=this.requestsHash[n.params.requestId])||!this.resourcesToIntercept.includes(c.type.toLowerCase())||c.request.url.startsWith("data:")){t.next=30;break}return t.next=22,this.getResponseBody(c,n.sessionId);case 22:return l=t.sent,p=l.base64Encoded,f=l.body,m={action:d.NETWORK_ADD_RESOURCE,resource:{url:c.request.url,content:p?f:Buffer.from(f).toString("base64"),encoding:"base64",size:e.computeSize(f),contentType:c.response.headers["content-type"]}},t.next=28,this.driver.executeAsyncScript("\n            var callback = arguments[arguments.length-1];\n            try{\n              var chromeVar = ((chrome && chrome.runtime && chrome.runtime.sendMessage) ? chrome : window._AQA_Chrome);\n              chromeVar.runtime.sendMessage(\n                '".concat(this.extensionId,"',\n                ").concat(JSON.stringify(m),",\n                function(response) {\n                  callback(response);\n                }\n              );\n            }catch(e){\n              callback(e);\n            }\n          "));case 28:t.sent.success&&delete this.requestsHash[n.params.requestId];case 30:if(n.method!==v.TARGET_ATTACHED){t.next=35;break}return t.next=33,this.execute(v.NETWORK_ENABLE,{},n.params.sessionId);case 33:return t.next=35,this.execute(v.RUNTIME_WAIT_DEBUGGER,{cacheDisabled:!0},n.params.sessionId);case 35:if(n.method!==v.TARGET_CREATED){t.next=44;break}if("page"!==n.params.targetInfo.type||n.params.targetInfo.attached){t.next=44;break}return t.next=39,this.execute(v.TARGET_ATTACH,{targetId:n.params.targetInfo.targetId,flatten:!0},n.sessionId);case 39:return y=t.sent,t.next=42,this.execute(v.TARGET_AUTOATTACH,{autoAttach:!0,flatten:!0,waitForDebuggerOnStart:!0},y.sessionId);case 42:return t.next=44,this.execute(v.TARGET_DISCOVER_TARGETS,{discover:!0},y.sessionId);case 44:case"end":return t.stop()}}),t,this)}))),function(e){return n.apply(this,arguments)})},{key:"onClose",value:function(){this.rejectAll(new Error("CDPConnection: The underlying connection was closed"))}},{key:"rejectAll",value:function(e){var t=this.executeRequests.values();this.executeRequests=new Map,Array.from(t).forEach((function(t){t.reject(e)}))}}],[{key:"computeSize",value:function(e){return(new TextEncoder).encode(e).length}},{key:"init",value:(r=t(h().mark((function t(r,n){var o,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.createCDPConnection("page");case 2:return s=new e(r,null!==(o=r._wsConnection)&&void 0!==o?o:r._cdpWsConnection,r.sessionId,n),t.next=5,s.execute(v.TARGET_AUTOATTACH,{autoAttach:!0,flatten:!0,waitForDebuggerOnStart:!0});case 5:return t.next=7,s.execute(v.TARGET_DISCOVER_TARGETS,{discover:!0});case 7:return t.next=9,s.execute(v.NETWORK_ENABLE,{});case 9:return t.abrupt("return",s);case 10:case"end":return t.stop()}}),t)}))),function(e,t){return r.apply(this,arguments)})}]);var r,n,s}();function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}var E=function(e){function r(e,t){var n,a,i,u;return o(this,r),a=this,u=[t],i=c(i=r),p(n=function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(a,g()?Reflect.construct(i,u||[],c(a).constructor):i.apply(a,u)),"driver",void 0),p(n,"chromeVariable","((chrome && chrome.runtime && chrome.runtime.sendMessage) ? chrome : window._AQA_Chrome)"),n.driver=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(r,e),u(r,[{key:"initNetworkConnection",value:(E=t(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disarm){e.next=2;break}return e.abrupt("return");case 2:return t=this.driver,e.next=5,y.init(t,this.extensionID);case 5:return e.next=7,this.checkExtensionAvailable();case 7:case"end":return e.stop()}}),e,this)}))),function(){return E.apply(this,arguments)})},{key:"checkExtensionAvailable",value:(b=t(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disarm){e.next=2;break}return e.abrupt("return");case 2:return t={action:d.HEALTH_CHECK},e.next=5,this.driver.executeAsyncScript("\n      var callback = arguments[arguments.length-1];\n      if(!".concat(this.chromeVariable," || !").concat(this.chromeVariable,".runtime || !").concat(this.chromeVariable,".runtime.sendMessage){\n        callback(false);\n      }\n      ").concat(this.chromeVariable,".runtime.sendMessage(\n        '").concat(this.extensionID,"',\n        ").concat(JSON.stringify(t),",\n        function(response) {\n          callback(response);\n          if (").concat(this.chromeVariable,".runtime.lastError) {return callback(false);}\n        }\n      );\n    "));case 5:e.sent.success||this.throwError(this.errors.EXTENSION_NOT_FOUND);case 7:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},{key:"createFlow",value:(v=t(h().mark((function e(t){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disarm){e.next=2;break}return e.abrupt("return");case 2:return null!=t&&t.name||this.throwError(this.errors.CREATE_FLOW_MISSING_NAME),this.uploadFlowData.name="".concat(t.name," (").concat(r.nameTimeStamp(),")"),this.uploadFlowData.description=t.description,n=null!=t&&t.device?this.devices[null==t?void 0:t.device]:m.CUSTOM,o={action:d.CREATE_FLOW,payload:x(x({},t),{},{name:this.uploadFlowData.name,device:n})},e.next=9,this.driver.executeAsyncScript("\n      var callback = arguments[arguments.length-1];\n      ".concat(this.chromeVariable,".runtime.sendMessage(\n        '").concat(this.extensionID,"',\n        ").concat(JSON.stringify(o),",\n        function(response) {\n          callback(response);\n        }\n      );\n    "));case 9:e.sent.success||this.throwError("".concat(this.errors.CREATE_FLOW_WITH_NAME," ").concat(this.uploadFlowData.name));case 11:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"doSnapshot",value:(f=t(h().mark((function e(t){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disarm){e.next=2;break}return e.abrupt("return");case 2:return t?r.log('taking "'.concat(t,'" snapshot...')):r.log("taking snapshot..."),n={action:d.DO_SNAPSHOT,payload:{pageName:t}},e.next=6,this.driver.executeAsyncScript("\n      var callback = arguments[arguments.length-1];\n      ".concat(this.chromeVariable,".runtime.sendMessage(\n        '").concat(this.extensionID,"',\n        ").concat(JSON.stringify(n),",\n        function(response) {\n          callback(response);\n        }\n      );\n    "));case 6:(o=e.sent).success?r.log("...done!"):this.throwError(o.error);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"uploadZip",value:(i=t(h().mark((function e(){var t,n,o,s,a,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disarm){e.next=2;break}return e.abrupt("return");case 2:return t=this.uploadFlowData,n=t.testId,o=t.suite,s=t.name,n?r.log("updating test ".concat(n," on suite ").concat(o,' with flow named "').concat(s,'"...')):r.log("creating test on suite ".concat(o,' with flow named "').concat(s,'"...')),a={action:d.UPLOAD,payload:this.uploadFlowData},e.next=7,this.driver.executeAsyncScript("\n        var callback = arguments[arguments.length-1];\n        ".concat(this.chromeVariable,".runtime.sendMessage(\n          '").concat(this.extensionID,"',\n          ").concat(JSON.stringify(a),",\n          function(response) {\n            callback(response);\n          }\n        );\n      "));case 7:(i=e.sent).success?r.log("...done!"):i.error?this.throwError("".concat(this.errors.UPLOAD_ZIP,": ").concat(i.error)):this.throwError(this.errors.UPLOAD_ZIP);case 9:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"downloadFlowSnapshot",value:(a=t(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.disarm){e.next=2;break}return e.abrupt("return");case 2:return t={action:d.DOWNLOAD},e.next=5,this.driver.executeAsyncScript("\n      var callback = arguments[arguments.length-1];\n      ".concat(this.chromeVariable,".runtime.sendMessage(\n        '").concat(this.extensionID,"',\n        ").concat(JSON.stringify(t),",\n        function(response) {\n          callback();\n        }\n      );\n    "));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})}],[{key:"init",value:(n=t(h().mark((function e(t,n){var o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new r(t,n),e.next=3,o.initNetworkConnection();case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})}]);var n,a,i,f,v,b,E}(function(){return u((function e(t){o(this,e),p(this,"extensionID","llaaiankjgnonjipogopofnpahaoccfo"),p(this,"version","1.2"),p(this,"devices",{"1280x1024":m.DESKTOP_1,"1366x668":m.DESKTOP_2,"1536x864":m.DESKTOP_3}),p(this,"errors",{CREATE_FLOW:"Unable to create flow",CREATE_FLOW_WITH_NAME:"Unable to create flow with name ",CREATE_FLOW_MISSING_NAME:"Missing name param on createFlow",EXTENSION_NOT_FOUND:"Chrome extension not available. Ensure it has been correctly loaded in the browser.",SNAPSHOT:"Unable to generate page snapshot",UNABLE_TO_CONNECT:"Unable to connect to the AQAPageCapture extension",UPLOAD_ZIP:"Unable to upload zip"}),p(this,"ignoreErrors",!1),p(this,"disarm",!1),p(this,"uploadFlowData",{name:"",suite:"",team:"",xTeam:"",description:void 0,testId:void 0}),t.ignoreErrors&&(this.ignoreErrors=!0),t.disarm&&(this.disarm=!0),t.suite||this.throwError('Missing AQA "suite" setting.'),this.uploadFlowData.suite=t.suite,t.team||this.throwError('Missing AQA "team" setting.'),this.uploadFlowData.team=t.team,t.xTeam||this.throwError("Missing AQA api key."),this.uploadFlowData.xTeam=t.xTeam,this.uploadFlowData.testId=t.testId}),[{key:"throwError",value:function(e){if(!this.disarm){if(!this.ignoreErrors)throw new Error("AQAPageCapture: ".concat(e));console.error("AQAPageCapture: ".concat(e))}}}],[{key:"nameTimeStamp",value:function(){var e=new Date;return"".concat(e.getMonth()+1,"-").concat(e.getDate(),"_").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())}},{key:"log",value:function(e){console.info("AQAPageCapture:",e)}}])}())})(),n.default})()));